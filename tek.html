<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Yapay Zeka Sohbet</title>
</head>
<body>

    <div>
        <label for="userInput">Sorunuzu girin:</label>
        <input type="text" id="userInput">
        <button onclick="sendMessage()">Gönder</button>
    </div>

    <div id="chatContainer">
        <ul id="userQuestions"></ul>
        <ul id="aiResponses"></ul>
    </div>

    <script>
        async function sendMessage() {
            var userInput = document.getElementById("userInput").value;

            // Kullanıcının girdiği soruları listelemek için
            document.getElementById("userQuestions").innerHTML += "<li>Kullanıcı: " + userInput + "</li>";

            // Yapay zekaya göndermek için
            const result = await runChat(userInput);
            const response = result.response.text();

            // Yapay zekanın cevaplarını listelemek için
            document.getElementById("aiResponses").innerHTML += "<li>Yapay Zeka: " + response + "</li>";
        }

        async function runChat(userInput) {
            const { GoogleGenerativeAI, HarmCategory, HarmBlockThreshold } = require("@google/generative-ai");

            const MODEL_NAME = "gemini-pro";
            const API_KEY = "AIzaSyBjdHMOJfCySu2vg8Xrle8PhKER0ZbWZJU";  // Buraya kendi API anahtarınızı ekleyin

            const genAI = new GoogleGenerativeAI(API_KEY);
            const model = genAI.getGenerativeModel({ model: MODEL_NAME });

            const generationConfig = {
                temperature: 0.9,
                topK: 1,
                topP: 1,
                maxOutputTokens: 2048,
            };

            const safetySettings = [
                {
                    category: HarmCategory.HARM_CATEGORY_HARASSMENT,
                    threshold: HarmBlockThreshold.BLOCK_NONE,  // Güvenlik ayarı "block_none" olarak değiştirildi
                },
                {
                    category: HarmCategory.HARM_CATEGORY_HATE_SPEECH,
                    threshold: HarmBlockThreshold.BLOCK_NONE,
                },
                {
                    category: HarmCategory.HARM_CATEGORY_SEXUALLY_EXPLICIT,
                    threshold: HarmBlockThreshold.BLOCK_NONE,
                },
                {
                    category: HarmCategory.HARM_CATEGORY_DANGEROUS_CONTENT,
                    threshold: HarmBlockThreshold.BLOCK_NONE,
                },
            ];

            const chat = model.startChat({
                generationConfig,
                safetySettings,
                history: [
                    {
                        role: "user",
                        parts: [{ text: userInput }],
                    },
                ],
            });

            return await chat.sendMessage(userInput);
        }
    </script>

</body>
</html>
